# README

## 1 来源说明

这个项目是基于跳表实现的轻量级键值型存储引擎，使用C++实现。插入数据、删除数据、查询数据、数据展示、数据落盘、文件加载数据，以及数据库大小显示。

转载自：https://github.com/youngyangyang04/Skiplist-CPP

## 2 项目中的文件

- README.md是项目的介绍（需要原版的介绍可以去上面的链接找）
- **SkipList.md/SkipList.assets是对源码的解析【重点】**
- Node.h 跳表核心实现 
- main.cpp 包含Node.h使用跳表进行数据操作 
- bin 生成可执行文件目录 
- makefile 编译脚本
- store 数据落盘的文件存放在这个文件夹 
- stress_test_start.sh 压力测试脚本
- LICENSE 使用协议
- stress-test是压力测试文件

## 3 提供接口

* insert_element（插入数据）
* delete_element（删除数据）
* search_element（查询数据）
* display_list（展示已存数据）
* dump_file（数据落盘）
* load_file（加载数据）
* size（返回数据规模）

## 4 存储引擎数据表现

### 插入操作

跳表树高：18 

采用随机插入数据测试：


| 插入数据规模（万条） | 耗时（秒） |
| -------------------- | ---------- |
| 10                   | 2.10441    |
| 50                   | 13.5358    |
| 100                  | 27.7905    |

每秒可处理写请求数（QPS）: 4.75w

### 取数据操作

| 取数据规模（万条） | 耗时（秒） |
| ------------------ | ---------- |
| 10                 | 2.14643    |
| 50                 | 11.3805    |
| 100                | 22.1097    |

**可能我用虚拟机的缘故吧，速度要比作者的慢一些。**

## 5 项目运行方式

```
make            // complie demo main.cpp
./bin/main      // run 
```

如果想自己写程序使用这个kv存储引擎，只需要在你的CPP文件中include skiplist.h 就可以了。

可以运行如下脚本测试kv存储引擎的性能（当然你可以根据自己的需求进行修改）

```
sh stress_test_start.sh 
```

## 6 待优化

* **delete的时候没有释放内存**       【已做】
* 压力测试并不是全自动的
* 跳表的key用int型，如果使用其他类型需要自定义比较函数，当然把这块抽象出来更好
* 如果再加上一致性协议，例如raft就构成了分布式存储，再启动一个http server就可以对外提供分布式存储服务了
* **最好写成两个.h文件和两个.cpp文件   【一直有问题】**

## 7 个人收获

**基于跳表实现的轻量级键值型存储引擎**

**项目描述**：本项目使用C++语言实现了轻量级的键值型的存储引擎。可以插入数据、删除数据、查询数据、数据展示、数据落盘、文件加载数据，以及数据库大小显示等功能。

**主要工作：**

在有序链表的基础上增加了“跳跃”的功能

在有序链表上加上了多级索引，通过索引来快速查找；可以支持快速的删除、插入和查找操作

**个人收获：**对链表的增删查操作有了更清晰的认识；熟悉了模版编程；对压力测试有一定的了解。